"use strict";!function(e,t){let i={},a=i.utils={isObjFunc:e=>t=>({}).toString.call(t)==="[object "+e+"]",extend:$.extend,sameDate:(e,t,i)=>"never"!==e&&"else"!==e&&("always"===e||(i||["Month","Date"]).map(e=>e.toLowerCase().replace(/\b\w/g,e=>e.toUpperCase())).every(i=>(e=>((e,t)=>(i,a)=>t(e(i),e(a)))(e,(e,t)=>e===t))(e=>e["get"+i]&&e["get"+i]())(new Date(e),t))),deepExtend(...e){return this.extend(!0,...e)},render:(e,t,i)=>e.replace(new RegExp((i||["{{","}}"]).join("\\s*?(.*?)\\s*?"),"g"),(e,i)=>new Function("data",(e=>`with(data || {}) {return (${e});}`)(i))(t)),renderObject(e,t,i){let a={};if(["String","Array","Object"].forEach(e=>a[`is${e}`]=this.isObjFunc(e)),a.isString(e))return this.render(e,t,i);if(a.isArray(e))return e.map(e=>this.renderObject(e,t,i));if(a.isObject(e)){let a=this.deepExtend({},e);for(let e in a)a[e]=this.renderObject(a[e],t,i);return a}return e},debounce(e,t){let i;return(...a)=>{clearTimeout(i),i=setTimeout(()=>e(...a),t)}},throttle(e,t){let i,a=0;return(...n)=>{let r=new Date;clearTimeout(i),r-a<t?i=setTimeout(()=>e(...n),t):(a=r,e(...n))}},setPath(...t){e.history.pushState({},"","#"+t.join("/"))},getPath:()=>e.location.hash.length?e.location.hash.substring(1):[],onPathChange(t){e.addEventListener("popstate",t)},positionNum:e=>e>10&&e<20?"th":["th","st","nd","rd"][e%10]||"th",openPath(e){e.length<3?$(".modal.in").attr("manual",!0).modal("hide"):$(".modal").filter((t,i)=>(i.getAttribute("roselia-path")||"").toLowerCase()===e.toLowerCase()).attr("manual",!0).modal("show")},colorUtils:{splitRGB:e=>e.match(/\d+/g),getYIQ(e){let t=this.splitRGB(e);return(299*t[0]+587*t[1]+114*t[2])/1e3},getNormalizedTextColor(e,t="#fff",i="#000"){return this.getYIQ(e)>=128?i:t},apply(e){let t=a.extend({},{changeText:!1,textColors:{light:"#fff",dark:"#000"},exclude:["rgb(0,0,0)"],target:"body",text:null},e),i=document.querySelector(t.selector),n=this;this.RGBaster.colors(i,{paletteSize:20,exclude:t.exclude,success(e){let i=n.splitRGB(e.dominant)?e.dominant:e.palette.find(e=>n.splitRGB(e))||"rgb(255,255,255)";if($(t.target).css({transition:"background-color 1800ms ease"}).css({backgroundColor:i}),t.changeText){$(t.text||t.target).css({transition:"color 1800ms ease"}).css({color:n.getNormalizedTextColor(i,t.textColors.light,t.textColors.dark)})}}})}}},n=a;i.LazyLoad=function(t){let i={extend:jQuery.extend,deepExtend(...e){return this.extend(!0,...e)},render:n.render,partition(e,t){let i=[[],[]];return e.forEach(e=>i[1^t(e)].push(e)),i},debounce:n.debounce,throttle:n.throttle},a=function(t){let a={load:!0,placeHolder:"static/img/logo.png",renderPlaceHolder:!1,selector:"img",changePlaceHolder:!0,prefix:"roselia",onscrolledimg:null,delim:["{{","}}"],backupSrc:!0,throttleRate:500};this.alive=!1;let n=this.options=i.deepExtend({},a,t);this.setOption=function(e){return this.options=i.deepExtend({},a,t),this},this.load=function(){this.alive&&this.destroy(),this.alive=!0,this.pics=document.querySelectorAll(n.selector),this.pics.forEach=this.pics.forEach||[].forEach,this.options.changePlaceHolder&&this.pics.forEach(e=>{let t=n.prefix+"-src";n.backupSrc&&e.setAttribute(t,e.src),e.src=n.changePlaceHolder?i.render(n.placeHolder,e,n.delim):n.placeHolder}),this.handler(),addEventListener("scroll",this.handler)},this.handler=i.throttle(function(t){let a=document.documentElement.scrollTop,n=e.innerHeight;return new Promise(e=>{e(i.partition(this.pics,e=>e.y&&e.y<=a+n))}).then(([e,t])=>(e.forEach(e=>e.src=e.getAttribute(this.options.prefix+"-src")||e.src),this.pics=t)).then(e=>(e.length||this.destroy(),e)).then(e=>this.options.onscrolledimg&&this.options.onscrolledimg(e))}.bind(this),n.throttleRate),this.destroy=function(){this.alive=!1,this.pics.forEach(e=>e.src=e.getAttribute(this.options.prefix+"-src")||e.src),removeEventListener("scroll",this.handler)},this.options.load&&this.load()};return a.of=function(e){return new a(e)},a.utils=i,a}(),i.memberList=[{jpName:"湊友希那",cnName:"凑友希那",enName:"Minato Yukina",birthday:"10-26",role:"Vo",jpCVName:"相羽あいな",cnCVName:"相羽爱奈",enCVName:"Aiba Aina",bloodType:"A",horoscope:"天蝎",encoreColor:"#890f87",memberPicUpper:2},{jpName:"氷川紗夜",cnName:"冰川纱夜",enName:"Hikawa Sayo",birthday:"3-20",role:"Gt",jpCVName:"工藤晴香",cnCVName:"工藤晴香",enCVName:"Kudou Haruka",bloodType:"AB",horoscope:"双鱼",encoreColor:"#00aabc",memberPicUpper:2},{jpName:"今井リサ",cnName:"今井莉纱",enName:"Imai Lisa",birthday:"8-25",role:"Ba",jpCVName:"遠藤ゆりか → 中島由貴",cnCVName:"远藤祐里香 → 中岛由贵",enCVName:"Endō Yurika → Nakashima Yuki",bloodType:"O",horoscope:"处女",encoreColor:"#dd2200",memberPicUpper:2,cvPicUpper:1},{jpName:"宇田川あこ",cnName:"宇田川亚子",enName:"Utakawa Ako",birthday:"7-3",role:"Dr",jpCVName:"桜川めぐ",cnCVName:"樱川惠",enCVName:"Sakuragawa Megu",bloodType:"B",horoscope:"巨蟹",encoreColor:"#dd0087",memberPicUpper:2},{jpName:"白金燐子",cnName:"白金燐子",enName:"Shirokane Rinko",birthday:"10-17",role:"Key",jpCVName:"明坂聡美 → 志崎樺音",cnCVName:"明坂聪美 → 志崎桦音",enCVName:"Akesaka Satomi → Shizaki Kanon",bloodType:"O",horoscope:"天秤",encoreColor:"#bbbbbb",memberPicUpper:2}],i.memberList.forEach(e=>{e.memberPicUpper=e.memberPicUpper||2,e.cvPicUpper=e.cvPicUpper||1}),i.member={opened:i.memberList.map(e=>0),openCount:0,upper:i.memberList.length,open(e){this.openCount+=1^this.opened[e],this.opened[e]=1},picMod:0,picSuffix:"jpg",picDiscrip:"流畅体验",changePicMod(){this.picMod^=1,this.picSuffix=["jpg","png"][this.picMod],this.picDiscrip=["流畅体验","丝滑画质"][this.picMod],i.mainVue.$nextTick(()=>i.lazyload.load())}},i.single=[{id:1,title:"BLACK SHOUT",track:["BLACK SHOUT","LOUDER","BLACK SHOUT -instrumental- ","LOUDER -instrumental- ","Roseliaミニドラマ～バンド練習編～ "],releaseDate:"2017-4-19",links:[{origin:"BanG Dream",link:"https://bang-dream.com/cd/roselia-1st-single-%E3%80%8Cblack-shout%E3%80%8D/"},{origin:"NetEase",link:"http://music.163.com/album?id=35423192"},{origin:"萌娘百科",link:"https://zh.moegirl.org/BLACK_SHOUT"}]},{id:2,title:"Re:birth day",track:["Re:birth day","陽だまりロードナイト","Re:birth day -instrumental- ","陽だまりロードナイト -instrumental- ","Roselia ミニドラマ～ふれあい動物編～ "],releaseDate:"2017-6-28",links:[{origin:"BanG Dream",link:"https://bang-dream.com/cd/roselia-2ndsg/"},{origin:"NetEase",link:"http://music.163.com/album?id=35663708"}]},{id:3,title:"熱色スターマイン",track:["熱色スターマイン","－HEROIC ADVENT－","熱色スターマイン -instrumental- ","－HEROIC ADVENT－ -instrumental- ","Roseliaミニドラマ～あこの厨二語辞典編～ "],releaseDate:"2017-8-30",links:[{origin:"BanG Dream",link:"https://bang-dream.com/cd/roselia-3rd-single/"},{origin:"NetEase",link:"http://music.163.com/album?id=36030721"}]},{id:4,title:"ONENESS",track:["ONENESS","Determination Symphony","ONENESS -instrumental- ","Determination Symphony -instrumental- "],releaseDate:"2017-11-29",links:[{origin:"BanG Dream",link:"https://bang-dream.com/cd/roselia4th/"},{origin:"NetEase",link:"http://music.163.com/album?id=36856222"}]},{id:5,title:"Opera of the wasteland",track:["Opera of the wasteland","軌跡","Opera of the wasteland -instrumental- ","軌跡 -instrumental- "],releaseDate:"2018-3-21",links:[{origin:"BanG Dream",link:"https://bang-dream.com/cd/roselia_5th/"},{origin:"NetEase",link:"http://music.163.com/album?id=37987030"}],extension:[{title:"P.S.",content:["和PP'P的⑨单一起买有特典？买买买（钱包卒）"]}]},{id:6,title:"R",track:["R","BLACK SHOUT(リマスターver.)","Neo-Aspect(リマスターver.)","R -instrumental-","BLACK SHOUT(リマスターver.) -instrumental-"],releaseDate:"2018/07/25",links:[{origin:"BanG Dream",link:"https://bang-dream.com/discographies/367"},{origin:"NetEase",link:"https://music.163.com/album?id=71852033"}],extension:[{title:"P.S.",content:["BanG-Dream的网站改版了！（终于不用WordPress了）| Yuki真棒.jpg"]}]},{id:7,title:"BRAVE JEWEL",track:["BRAVE JEWEL","Sanctuary","BRAVE JEWEL -instrumental-","Sanctuary -instrumental-"],releaseDate:"2018/12/12",links:[{origin:"BanG Dream",link:"https://bang-dream.com/discographies/633"}],extension:[{title:"P.S.",content:["这首单曲还是19年的第二季的OP，啊真香","但是官网说隔壁PP'P的12单也是OP，总不会是打字错误吧（划去）"]}]},{id:8,title:"Safe and Sound",track:["Safe and Sound","PASSIONATE ANTHEM","Safe and Sound -instrumental-","PASSIONATE ANTHEM -instrumental-"],releaseDate:"2019/2/20",links:[{origin:"BanG Dream",link:"https://bang-dream.com/discographies/739"}],extension:[{title:"快住手！",content:["2月20号7CD10BD，我的钱包要空了。","My wallet is not safe and sound."]},{title:"封面",content:"目前暂时将游戏假封面作为专辑封面",hidden:!1}]},{id:9,title:"FIRE BIRD",track:["FIRE BIRD","Ringing Bloom","FIRE BIRD -instrumental-","Ringing Bloom -instrumental-"],releaseDate:"2019/07/24",links:[{origin:"BanG Dream",link:"https://bang-dream.com/discographies/963"},{origin:"萌娘百科（FIRE BIRD）",link:"https://zh.moegirl.org/FIRE_BIRD"},{origin:"萌娘百科（Ringing Bloom）",link:"https://zh.moegirl.org/zh-cn/Ringing_Bloom"}],extension:[{title:"Blu-ray",content:["アニメ「BanG Dream! 2nd Season」#5~#6","Web用次回予告#5~#6","アニメ「BanG Dream! 2nd Season」CM Roselia編"],hidden:!1},{title:"",hidden:!0,content:"Rinrin Bloom"},{title:"GBP 相关（Ringring Bloom）",content:["因为是在游戏中出现的原创歌曲，我暂且认为是9单的歌曲（PA：明明是我先来的，怎么就成CW曲了？）（还真是CW曲草（日本語意味））","这首歌根本就不能在手机上玩","本人比较菜，只能在pad上clear（FC有生之年吧）","物量冠军，相比之下GK是儿歌","六兆年比这个简单一点（认真脸）"]},{title:"1094 Note",content:["是 Ringing Bloom 的 Note 数","让我们记住这个鬼畜的EX物量","C/W曲尚且如此，听着感觉FIRE BIRD难度也不会低"],hidden:!1},{title:"935 Note",content:["是 Fire Bird 的 Note 数","还行（毕竟我都能FC）"],hidden:!1}]},{id:10,title:"約束",track:["約束","“UNIONS” Road","約束 -instrumental-","“UNIONS” Road -instrumental-"],releaseDate:"2020/01/15",extension:[{title:"",content:"Determination Symphony (Lisa Version)"}],links:[{origin:"BanG Dream!",link:"https://bang-dream.com/discographies/1388"},{origin:"谱面",link:"https://bangdream.ga/music/jp/200"}]}],i.album=[{id:1,title:"Anfang",track:["Neo-Aspect","BLACK SHOUT","Opera of the wasteland","陽だまりロードナイト","ONENESS","Re:birth day","Legendary","－HEROIC ADVENT－","Determination Symphony","熱色スターマイン","軌跡","LOUDER"],releaseDate:"2018-5-2",links:[{origin:"BanG Dream",link:"https://bang-dream.com/discographies/113"},{origin:"NetEase",link:"http://music.163.com/m/album?id=38509280"}],extension:[{title:"P.S.",content:["嘛，这个好像是买Blu-ray付生産限定盤更有意义呢，通常版的东西就少得可怜了，不过就当单曲买了也不亏（3200+JPY）"]}]}],i.cover=[{id:1,title:"バンドリ！ ガールズバンドパーティ！ カバーコレクション Vol.1",track:["光るなら / Poppin’Party","千本桜 / Poppin’Party","アスノヨゾラ哨戒班 / Afterglow","READY STEADY GO / Afterglow","secret base ～君がくれたもの～ / Pastel＊Palettes","ふわふわ時間 / Pastel＊Palettes","魂のルフラン / Roselia","ETERNAL BLAZE / Roselia","いーあるふぁんくらぶ / ハロー、ハッピーワールド！","ロメオ / ハロー、ハッピーワールド！"],releaseDate:"2018-06-27",links:[{origin:"BanG Dream",link:"https://bang-dream.com/cd/%E3%83%90%E3%83%B3%E3%83%89%E3%83%AA%EF%BC%81-%E3%82%AC%E3%83%BC%E3%83%AB%E3%82%BA%E3%83%90%E3%83%B3%E3%83%89%E3%83%91%E3%83%BC%E3%83%86%E3%82%A3%EF%BC%81-%E3%82%AB%E3%83%90%E3%83%BC%E3%82%B3%E3%83%AC/"},{origin:"NetEase",link:"http://music.163.com/m/album?id=38272155"}]}];let r=new Date;["single","album","cover"].map(e=>i[e]).forEach(e=>e.forEach(e=>{i.utils.sameDate(e.releaseDate,r,["month","date","full year"])&&(e.extension=e.extension||[],e.extension.push({title:"Released Today!",content:{cn:"今日发售！",jp:"今発売！",en:"Released Today!"}}))})),i.moreLinks=[{description:"BanG Dream!导航站",target:"https://www.bangdream.moe/"},{description:"BanG Dream! 查卡器",target:"https://bangdream.ga/"},{description:"BanG Dream! 百科",target:"https://www.bangdreamwiki.com/"}],i.langOf=function(){return 1===arguments.length?this.utils.isObjFunc("Array")(arguments[0])?this.langOf(...arguments[0]):this.utils.isObjFunc("String")(arguments[0])?arguments[0]:arguments[0][i.lang]:2===arguments.length?arguments[0][i.lang+arguments[1]]:arguments[this.languages.indexOf(i.lang)]||arguments[0]},i.randomPick=function(e,t,i){return(i=i||(e=>e||""))(Math.floor(Math.random()*(t-e)+e))},i.imgBase="static/img/",i.languages=["cn","jp","en"],i.displayLanguages=["中文","日本語","English"];let o=(navigator.language||navigator.browserLanguage).toLowerCase(),s=i.languages.filter(e=>o.indexOf(e)>-1);i.lang=s.length?s[0]:"cn",i.birthdayMember=i.memberList.filter(e=>a.sameDate(e.birthday,r)),i.releaseSingle=i.single.filter(e=>a.sameDate(e.releaseDate,r,["full year","month","date"])),i.randomLyric={album:"",at:"",id:1,lyric:"",name:"",type:""},i.getLyric=function(){return fetch("https://roselia.moe/blog/api/roselia/lyric/random").then(e=>e.json()).then(e=>{e.link=`#${e.type}/${e.id}${n.positionNum(e.id)}`;const t=e.lyric.split("\n");e.jpLyric=t[0],e.cnLyric=t[1],i.randomLyric=e})},i.recommandVideos=[],i.getRecommandVideos=function(){return fetch("static/json/recommandVideos.json").then(e=>e.json()).then(e=>{i.recommandVideos=e.map((e,t)=>({...e,id:t})),i.mainVue.$nextTick(i.onLoad)})},e.roselia=i}(window),$(function(){let e=document.title;roselia.mainVue=new Vue({el:"#main",data:{roselia:roselia}}),roselia.lazyload=roselia.LazyLoad.of({load:!1,selector:"img:not(.lazyload-exclude)"}),roselia.mainVue.$nextTick(roselia.onLoad=(()=>{roselia.lazyload.load(),roselia.utils.openPath(roselia.utils.getPath());let t=$(".modal:not(.roselia-initialized)");t.on("shown.bs.modal",function(e){let t=$(e.target);if(!t.attr("manual")){let t=e.target.getAttribute("roselia-path");t&&roselia.utils.setPath(t)}t.attr("manual",""),document.title=t.find(".modal-title").text()||document.title,roselia.lazyload.handler()}),t.on("hidden.bs.modal",function(t){let i=$(t.target);i.attr("manual")||roselia.utils.setPath([]),i.attr("manual",""),document.title=e}),t.addClass("roselia-initialized")})),addEventListener("popstate",e=>roselia.utils.openPath(roselia.utils.getPath())),roselia.getLyric(),roselia.getRecommandVideos()});